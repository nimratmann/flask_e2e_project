# flask_e2e_project

This is a full-stack medication tracker application built with Python (Flask) for the backend and Tailwind CSS for the frontend. The inspiration behind this application is to address the issue of individuals forgetting to complete their prescribed medication dosages.

The Medication Tracker provides users with real-time visibility into their prescription progress and allows them to track details about the prescribing doctoras well

## Structure of Repo
1. app folder: Includes the scripts for the Flask web application developed for the project (app.py. templates) as well as a static folder with the front-end styling and images (icons, logo).
2. data folder: Comprises dummy data employed for initial project testing before connecting to the database.
3. db folder: Contains SQL database code and models for table creation and value insertion.
4. docs folder: Houses application screenshots and a README.md file providing an overview of the project and application.
5. logs folder: Stores screenshot logs generated by the built-in Flask logger, capturing many success and failure events throughout the application development process.

## Technologies Utilized

1. GitHub: Employed for version control of the project scripts.
2. Environment Variables (.env): Used to store credentials for Google OAuth and database connection strings, particularly for MySQL connection.
3. Flask: Chosen as the backend framework to develop the web service project, enabling the creation of a Flask app.
4. Tailwind: Employed as the frontend framework to design the web-service interface.
5. Azure Database for MySQL flexible server: Selected as the project's database to integrate data seamlessly into the Flask app.
6. SQLAlchemy: Utilized as the Object-Relational Mapping (ORM) tool within the Flask app, facilitating establishing a connection with the MySQL database and enabling data querying.
7. Google OAuth: Integrated as the authorization service in the project to implement straightforward user authorization within the Flask app.
8. Docker: Incorporated into the project to containerize the Flask app, streamlining deployment and ensuring consistency across different environments.
9. Cloud Deployment with Azure: Utilized Microsoft Azure's App Services to deploy the Flask app to the cloud, providing an alternative web application deployment method.


## Environment Variables (.env) Configuration

In this project, environment variables were crucial in storing credentials for both Google OAuth and MySQL database connections. The .env file structure in the repository adhered to the following template:

- GOOGLE_CLIENT_ID = "client-id"
- GOOGLE_CLIENT_SECRET = "client-secret"
- DB_HOST = "azure-host-link"
- DB_DATABASE = "database-name"
- DB_USERNAME = "username"
- DB_PASSWORD = "password"
- DB_PORT = 3306

This organized structure allowed for easy management and secure storage of sensitive information, facilitating seamless integration with the MySQL database and enabling secure communication with Google OAuth services within the project.

## Running the Application Locally

### 1. Clone the Repository

Clone the repository to your local machine:

### 2. Install and configure tailwind

#### Run the following commands to set up Tailwind CSS:
1. ```npm init -y``` to create a package.json file
2. ```npm i tailwindcss``` to install tailwind
3. ```npx tailwindcss init``` to initialize tailwind
4. Change the content section of the file so that the final tailwind.config.js looks something like this:
- content: ``` ["./app/templates/.html", "./app/static/src/.js"]```

5. Create an "input.css" file inside the css folder, located within the static folder, and add the following:

    - @tailwind base;
    - @tailwind components;
    - @tailwind utilities;

6. Create an alias in the package.json to track changes in your styles and automatically update the output file.

   ``` "buildcss": "npx tailwindcss -i ./static/css/input.css -o ./static/css/output.css --watch" ```

### 3. Install flask packages
- Run ```pip install -r requirements.txt```

### 4. Setup the Environmental variables

### 5. Run "env\scripts\activate" to activate your environmental variables

### 6. Run "python app.py" to start the project.


## Deploying using Docker and Docker Compose

1. Ensure Docker and Docker Compose are on your local machine

2. Create a .env file in the same directory as your docker-compose.yml file. Populate it with the required environment variables, including DB_USERNAME, DB_PASSWORD, DOCKER_DB_HOST, DB_NAME, etc.

3. Place the DigiCertGlobalRootCA.crt.pem file in the ./app directory. (Azure Database for MySQL flexible server SSL certificate)

4. Open the Google shell terminal, and navigate to the directory containing your docker-compose.yml file.

5. Run the following command to build and start the services

```docker-compose up --build```

6. Access your Flask application at http://localhost:5000. The application should be connected to the MySQL database.


## Deploying Application on Azure
1. To run the flask application via Azure App Service. Use the following command curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash to initiate Azure Cli package installation.
2. Then, in your terminal, use the following commands az  and az login--use-device-code., type in "az." You are then going to click the URL from the terminal and enter the code to authenticate. Use your Stony Brook account and press continue. You can then exit out of that tab and go back to the Google Shell environment. You will see that you were successfully authenticated.
3. Then insert the command az account list --output table into your terminal. You are going to be given a list of different subscription IDs. To change this ID to the "Azure for Students" one, use the command az account set --subscription subscriptionId.
4. Now, log into the Azure Web Portal and create a new resource group under the "Resource Groups" tab. Ensure your resource group is under the "Azure for Students" subscription and has a simple name with no white space and no special characters.
5. Then redirect to the Google Shell Environment and in the terminal use the command az group list.
6. To launch the azure web application, insert the command'''az webapp up --name-insert resource group here-flask --runtime PYTHON:3.9 --sku B1." You have to insert a preferred "name" and "resource group" name you created in your Azure account.
7. The terminal will then say that the webapp does not exist, and it will create the resource group and start the zip deployment process. (This process takes a few minutes)
8. You can now login into your Azure account and view your running wbepage URL under "App Services"
